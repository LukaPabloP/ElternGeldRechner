<!DOCTYPE html>
<html lang="de">
<head>
    <!-- SEO Meta Tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elterngeld-Rechner 2024/2025 - Kostenlos berechnen | Aktuelle Gesetze</title>
    <meta name="description" content="✅ Kostenloser Elterngeld-Rechner 2024/2025 mit aktuellen Gesetzen. Berechnen Sie Ihr Elterngeld inkl. Geschwisterbonus & Mehrlingszuschlag. Sofort & ohne Anmeldung.">
    <meta name="keywords" content="Elterngeld Rechner, Elterngeld berechnen, Basiselterngeld 2024, Elterngeld 2025, Geschwisterbonus, Mehrlingszuschlag">
    <meta name="author" content="Elterngeld-Rechner.com">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph / Social Media -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Elterngeld-Rechner 2024/2025 - Kostenlos berechnen">
    <meta property="og:description" content="Berechnen Sie Ihr Elterngeld nach den neuesten Gesetzen. Kostenlos, sofort und ohne Anmeldung.">
    <meta property="og:url" content="https://elterngeld-rechner.com">
    <meta property="og:site_name" content="Elterngeld-Rechner">
    <meta property="og:locale" content="de_DE">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Elterngeld-Rechner 2024/2025">
    <meta name="twitter:description" content="Kostenloser Elterngeld-Rechner mit aktuellen Gesetzen">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://elterngeld-rechner.com">
    
    <!-- Favicon -->
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    
    <!-- Structured Data (JSON-LD) -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Elterngeld-Rechner",
        "description": "Kostenloser Rechner für Elterngeld nach aktuellen Gesetzen 2024/2025",
        "url": "https://elterngeld-rechner.com",
        "applicationCategory": "FinanceApplication",
        "operatingSystem": "Any",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "EUR"
        },
        "author": {
            "@type": "Organization",
            "name": "Elterngeld-Rechner.com"
        }
    }
    </script>
    
    <!-- External Scripts -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    
    <style>
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif; 
            margin: 0; 
            padding: 0; 
            line-height: 1.6;
        }
        
        /* Accessibility: Remove spinner buttons for better UX */
        input[type='number']::-webkit-inner-spin-button, 
        input[type='number']::-webkit-outer-spin-button { 
            -webkit-appearance: none; 
            margin: 0; 
        }
        input[type='number'] { 
            -moz-appearance: textfield; 
        }
        
        /* Accessibility: Focus indicators */
        button:focus,
        input:focus,
        select:focus {
            outline: 3px solid #3B82F6;
            outline-offset: 2px;
        }
        
        /* Accessibility: Skip link */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 6px;
            background: #000;
            color: #fff;
            padding: 8px;
            text-decoration: none;
            z-index: 1000;
        }
        .skip-link:focus {
            top: 6px;
        }
        
        /* Accessibility: High contrast mode support */
        @media (prefers-contrast: high) {
            .bg-blue-50 { background-color: #E0F2FE !important; }
            .text-gray-600 { color: #000 !important; }
        }
        
        /* Accessibility: Reduced motion */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</head>
<body>
    <!-- Skip Link for Accessibility -->
    <a href="#main-content" class="skip-link">Zum Hauptinhalt springen</a>
    
    <!-- Main Application -->
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useRef } = React;

        // --- HILFSFUNKTIONEN ---
        const calculateNetIncome = (bruttoStr, steuerklasse, bundesland, kirchensteuer, anzahlKinder) => { 
            const brutto = parseFloat(bruttoStr || '0'); 
            if (brutto === 0) return { netto: 0, details: {} }; 
            const jahresBrutto = brutto * 12; 
            const bbgRvAv = 90600, bbgKvPv = 62100; 
            const rvSatz = 0.093, avSatz = 0.013, kvSatz = 0.073 + 0.0085; 
            let pvSatz = bundesland === 'Sachsen' ? 0.022 : 0.017; 
            const rvBeitrag = Math.min(jahresBrutto, bbgRvAv) * rvSatz; 
            const avBeitrag = Math.min(jahresBrutto, bbgRvAv) * avSatz; 
            const kvBeitrag = Math.min(jahresBrutto, bbgKvPv) * kvSatz; 
            const pvBeitrag = Math.min(jahresBrutto, bbgKvPv) * pvSatz; 
            const sozialabgaben = rvBeitrag + avBeitrag + kvBeitrag + pvBeitrag; 
            let zuVersteuern = jahresBrutto - sozialabgaben - 1260; 
            let lohnsteuer = 0; 
            const grundfreibetrag = steuerklasse === 'III' ? 23568 : 11784; 
            if (zuVersteuern > grundfreibetrag) { 
                const y = (zuVersteuern - grundfreibetrag) / 10000; 
                if (zuVersteuern <= 17005) lohnsteuer = (1088.67 * y + 1400) * y; 
                else if (zuVersteuern <= 66760) lohnsteuer = (206.43 * (y - 1.7005) + 2397) * (y - 1.7005) + 938.24; 
                else if (zuVersteuern <= 277825) lohnsteuer = 0.42 * zuVersteuern - 10253; 
                else lohnsteuer = 0.45 * zuVersteuern - 18119; 
            } 
            if (steuerklasse === 'V') lohnsteuer *= 1.5; 
            if (steuerklasse === 'III') lohnsteuer *= 0.6; 
            if (steuerklasse === 'II') lohnsteuer -= 4260; 
            const kirchensteuerSatz = (bundesland === 'Bayern' || bundesland === 'Baden-Württemberg') ? 0.08 : 0.09; 
            const kirchensteuerBeitrag = kirchensteuer === 'ja' ? lohnsteuer * kirchensteuerSatz : 0; 
            const gesamtAbzuege = sozialabgaben + lohnsteuer + kirchensteuerBeitrag; 
            const jahresNetto = jahresBrutto - gesamtAbzuege; 
            return { 
                netto: Math.max(0, jahresNetto / 12), 
                details: { 
                    sozialabgaben: sozialabgaben / 12, 
                    lohnsteuer: lohnsteuer / 12, 
                    kirchensteuer: kirchensteuerBeitrag / 12 
                } 
            }; 
        };
        
        const getReplacementRate = (netto) => { 
            if (netto <= 0) return 0; 
            if (netto >= 1240) { 
                const cappedNetto = Math.min(netto, 2770); 
                if (cappedNetto <= 1200) return 0.67; 
                return Math.max(0.65, 0.67 - (((cappedNetto - 1200) / 2) * 0.001)); 
            } else { 
                return Math.min(1.0, 0.67 + (((1240 - netto) / 2) * 0.001)); 
            } 
        };

        // --- SVG ICONS mit Accessibility ---
        const Download = ({ className = "w-5 h-5" }) => ( 
            <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" aria-hidden="true">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                <polyline points="7,10 12,15 17,10"/>
                <line x1="12" y1="15" x2="12" y2="3"/>
            </svg> 
        );
        
        const ExternalLink = ({ className = "w-4 h-4" }) => ( 
            <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" aria-hidden="true">
                <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
                <polyline points="15,3 21,3 21,9"/>
                <line x1="10" y1="14" x2="21" y2="3"/>
            </svg> 
        );

        // --- BARRIEREFREIER FOOTER ---
        const LegalFooter = () => (
            <footer className="mt-12 pt-8 border-t border-gray-300 text-center text-gray-500 text-sm" role="contentinfo">
                <nav aria-label="Rechtliche Links">
                    <div className="mb-6">
                        <button 
                            onClick={() => window.location.href = 'impressum.html'} 
                            className="text-blue-600 hover:underline mx-4 bg-transparent border-none cursor-pointer"
                            aria-label="Zum Impressum navigieren"
                        >
                            Impressum
                        </button>
                        <button 
                            onClick={() => window.location.href = 'datenschutz.html'} 
                            className="text-blue-600 hover:underline mx-4 bg-transparent border-none cursor-pointer"
                            aria-label="Zur Datenschutzerklärung navigieren"
                        >
                            Datenschutz
                        </button>
                    </div>
                </nav>
                <p className="mt-8 text-xs">© {new Date().getFullYear()} Elterngeld-Rechner. Alle Rechte vorbehalten.</p>
            </footer>
        );

        // --- PDF-LAYOUT ---
        const PDFLayout = ({ result, formData }) => {
            if (!result || !formData) return null;
            return (
                <div className="p-10 bg-white w-[800px]">
                    <div className="flex justify-between items-center pb-4 border-b">
                        <h1 className="text-2xl font-bold text-gray-800">Ihr Elterngeld-Fahrplan</h1>
                        <p className="text-sm text-gray-500">Berechnet am: {new Date().toLocaleDateString('de-DE')}</p>
                    </div>
                    <div className="my-8 text-center bg-blue-50 p-6 rounded-lg">
                        <p className="text-lg text-blue-800">Ihr voraussichtliches Basiselterngeld</p>
                        <p className="text-6xl font-bold text-blue-900 my-2">{result.elterngeld?.toLocaleString('de-DE')} €</p>
                        <p className="text-lg text-blue-800">pro Monat</p>
                        <hr className="my-4" />
                        <p className="text-md text-gray-700">Gesamtsumme über 12 Monate: <strong>{result.gesamtsumme?.toLocaleString('de-DE')} €</strong></p>
                    </div>
                    <div className="grid grid-cols-2 gap-8">
                        <div>
                            <h2 className="text-xl font-semibold text-gray-700 mb-3">Ihre Angaben</h2>
                            <div className="space-y-2 text-gray-600">
                                <p><strong>Bruttoeinkommen:</strong> {parseFloat(formData.brutto).toLocaleString('de-DE')} €</p>
                                <p><strong>Steuerklasse:</strong> {formData.steuerklasse}</p>
                                <p><strong>Bundesland:</strong> {formData.bundesland}</p>
                                <p><strong>Geburtstermin:</strong> {formData.geburtsmonat}/{formData.geburtsjahr}</p>
                                <p><strong>Kirchensteuer:</strong> {formData.kirchensteuer === 'ja' ? 'Ja' : 'Nein'}</p>
                                <p><strong>Geschwisterbonus:</strong> {formData.geschwisterbonusBedingung === 'ja' ? 'Ja' : 'Nein'}</p>
                            </div>
                        </div>
                        <div>
                            <h2 className="text-xl font-semibold text-gray-700 mb-3">Berechnungsdetails</h2>
                            <div className="space-y-2 text-gray-600">
                                <p><strong>Geschätztes Netto:</strong> {result.details?.netto?.toLocaleString('de-DE', { maximumFractionDigits: 0 })} €</p>
                                <p><strong>Ersatzrate:</strong> {(result.details?.ersatzrate * 100).toFixed(1)}%</p>
                                <p><strong>Grundbetrag:</strong> {result.details?.basisElterngeld?.toLocaleString('de-DE', { maximumFractionDigits: 0 })} €</p>
                                {result.details?.geschwisterbonus > 0 && <p><strong>+ Geschwisterbonus:</strong> {result.details.geschwisterbonus.toLocaleString('de-DE', { maximumFractionDigits: 0 })} €</p>}
                                {result.details?.mehrlingszuschlag > 0 && <p><strong>+ Mehrlingszuschlag:</strong> {result.details.mehrlingszuschlag.toLocaleString('de-DE', { maximumFractionDigits: 0 })} €</p>}
                            </div>
                        </div>
                    </div>
                    <div className="mt-10 pt-6 border-t">
                        <h2 className="text-xl font-semibold text-gray-700 mb-3">✅ Wichtige Nächste Schritte*</h2>
                        <ul className="list-disc list-inside space-y-2">
                            <li>Offiziellen Antrag vorbereiten (z.B. über elterngeld-digital.de).</li>
                            <li>Steuerliche Situation prüfen (ggf. Steuerklassenwechsel).</li>
                            <li>Geburtsurkunde des Kindes beantragen, sobald verfügbar.</li>
                        </ul>
                        <p className="text-xs text-gray-500 mt-2">*Einige der empfohlenen Schritte können Links zu Partnern enthalten.</p>
                    </div>
                    <div className="mt-8 text-center text-xs text-gray-400 pt-4 border-t">
                        <p className="font-bold">Wichtiger Haftungsausschluss:</p>
                        <p>Dies ist eine unverbindliche Simulation auf Basis Ihrer Eingaben und aktueller Gesetzeslagen (Stand Juli 2025). Die Berechnung stellt keine Rechts- oder Steuerberatung dar und erfolgt ohne Gewähr. Für eine verbindliche Auskunft wenden Sie sich bitte ausschließlich an Ihre zuständige Elterngeldstelle.</p>
                        <p className="mt-2">© {new Date().getFullYear()} Elterngeld-Rechner</p>
                    </div>
                </div>
            );
        };

        // --- HAUPTKOMPONENTE ---
        const ElterngeldRechner = () => {
            const [step, setStep] = useState(1);
            const [formData, setFormData] = useState({ 
                brutto: '', 
                steuerklasse: 'I', 
                bundesland: 'Bayern', 
                geburtsmonat: '', 
                geburtsjahr: '', 
                geburtstag: '', 
                mehrlinge: 'nein', 
                teilzeit: 'nein', 
                email: '', 
                kirchensteuer: 'nein', 
                geschwisterbonusBedingung: 'nein' 
            });
            const [result, setResult] = useState(null);
            const pdfRef = useRef();

            const handleInputChange = (field, value) => setFormData(prev => ({ ...prev, [field]: value }));
            const handleBruttoChange = (e) => handleInputChange('brutto', e.target.value);

            const calculateElterngeld = () => {
                const { netto, details: abzugDetails } = calculateNetIncome(
                    formData.brutto, 
                    formData.steuerklasse, 
                    formData.bundesland, 
                    formData.kirchensteuer, 
                    formData.geschwisterbonusBedingung === 'ja' ? 1 : 0
                );
                const elterngeldNetto = Math.min(netto, 2770);
                const ersatzrate = getReplacementRate(elterngeldNetto);
                let basisElterngeld = elterngeldNetto * ersatzrate;
                let geschwisterbonus = formData.geschwisterbonusBedingung === 'ja' ? Math.max(basisElterngeld * 0.10, 75) : 0;
                let mehrlingszuschlag = 0;
                if (formData.mehrlinge === 'zwillinge') mehrlingszuschlag = 300;
                if (formData.mehrlinge === 'drillinge') mehrlingszuschlag = 600;
                const gesamtElterngeld = basisElterngeld + geschwisterbonus + mehrlingszuschlag;
                const finalElterngeld = Math.round(Math.min(Math.max(gesamtElterngeld, 300), 1800 + mehrlingszuschlag));
                const jahreseinkommen = parseFloat(formData.brutto || '0') * 12;
                const geburtsjahr = parseInt(formData.geburtsjahr), geburtsmonat = parseInt(formData.geburtsmonat);
                let grenze = 300000;
                if (geburtsjahr === 2024 && geburtsmonat >= 4) grenze = 200000;
                if (geburtsjahr >= 2025 && geburtsmonat >= 4) grenze = 175000;
                else if (geburtsjahr >= 2025) grenze = 200000;
                if (jahreseinkommen > grenze) { 
                    setResult({ elterngeld: 0, grund: 'Einkommensgrenze überschritten', grenze, jahreseinkommen }); 
                } else { 
                    setResult({ 
                        elterngeld: finalElterngeld, 
                        grund: 'Berechnung erfolgreich', 
                        grenze, 
                        jahreseinkommen, 
                        gesamtsumme: finalElterngeld * 12, 
                        monate: 12, 
                        details: { netto, ersatzrate, basisElterngeld, geschwisterbonus, mehrlingszuschlag } 
                    }); 
                }
                setStep(3);
            };

            const resetForm = () => { 
                setStep(1); 
                setResult(null); 
                setFormData({ 
                    brutto: '', 
                    steuerklasse: 'I', 
                    bundesland: 'Bayern', 
                    geburtsmonat: '', 
                    geburtsjahr: '', 
                    geburtstag: '', 
                    mehrlinge: 'nein', 
                    teilzeit: 'nein', 
                    email: '', 
                    kirchensteuer: 'nein', 
                    geschwisterbonusBedingung: 'nein' 
                }); 
            };

            const handleDownloadPDF = () => {
                const { jsPDF } = window.jspdf;
                const input = pdfRef.current;
                if (!input) return;
                html2canvas(input, { scale: 2 }).then((canvas) => {
                    const imgData = canvas.toDataURL('image/png');
                    const pdf = new jsPDF('p', 'mm', 'a4');
                    const pdfWidth = pdf.internal.pageSize.getWidth();
                    const imgWidth = canvas.width;
                    const imgHeight = canvas.height;
                    const ratio = imgWidth / imgHeight;
                    const finalImgHeight = pdfWidth / ratio;
                    pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, finalImgHeight);
                    pdf.save(`Elterngeld-Berechnung-${new Date().toISOString().slice(0, 10)}.pdf`);
                });
            };

            // STEP INDICATOR
            const StepIndicator = () => ( 
                <nav aria-label="Fortschritt der Berechnung" className="flex justify-center mb-8">
                    {[
                        { num: 1, label: "Einkommensdaten" },
                        { num: 2, label: "Familiendaten" }, 
                        { num: 3, label: "Ergebnis" }
                    ].map(({ num, label }) => (
                        <div key={num} className="flex items-center">
                            <div 
                                className={`w-10 h-10 rounded-full flex items-center justify-center text-white font-bold ${step >= num ? 'bg-blue-500' : 'bg-gray-300'}`}
                                aria-current={step === num ? 'step' : undefined}
                                aria-label={`Schritt ${num}: ${label} ${step === num ? '(aktuell)' : step > num ? '(abgeschlossen)' : '(nicht begonnen)'}`}
                            >
                                {num}
                            </div>
                            {num < 3 && (
                                <div className={`w-16 h-1 mx-2 ${step > num ? 'bg-blue-500' : 'bg-gray-300'}`} aria-hidden="true"></div>
                            )}
                        </div>
                    ))}
                </nav>
            );

            // STEP 1
            const Step1 = () => ( 
                <section aria-labelledby="step1-heading">
                    <h2 id="step1-heading" className="text-3xl font-bold text-center text-gray-800 mb-8">💰 Ihre Einkommensdaten</h2>
                    
                    <div className="bg-blue-50 border-l-4 border-blue-500 p-6 rounded-lg">
                        <fieldset>
                            <legend className="text-xl font-semibold text-blue-800 mb-4">Brutto-Monatseinkommen</legend>
                            
                            <div className="grid grid-cols-2 md:grid-cols-4 gap-3 mb-4" role="group" aria-label="Vordefinierte Einkommenswerte">
                                {[2000, 2500, 3000, 3500, 4000, 4500, 5000, 6000].map(betrag => ( 
                                    <button 
                                        key={betrag} 
                                        onClick={() => handleInputChange('brutto', betrag.toString())} 
                                        className={`p-3 rounded-lg border-2 font-semibold transition-all ${
                                            formData.brutto === betrag.toString() 
                                                ? 'bg-blue-500 text-white border-blue-500' 
                                                : 'bg-white text-gray-700 border-gray-300 hover:border-blue-400'
                                        }`}
                                        type="button"
                                        aria-pressed={formData.brutto === betrag.toString()}
                                        aria-label={`${betrag.toLocaleString('de-DE')} Euro auswählen`}
                                    >
                                        {betrag.toLocaleString('de-DE')}€
                                    </button> 
                                ))}
                            </div>
                            
                            <div className="flex items-center">
                                <div className="flex-1 relative">
                                    <label htmlFor="brutto-input" className="sr-only">Brutto-Monatseinkommen in Euro</label>
                                    <input 
                                        id="brutto-input"
                                        type="number" 
                                        value={formData.brutto} 
                                        onChange={handleBruttoChange} 
                                        placeholder="Oder geben Sie Ihr Gehalt ein..." 
                                        className="w-full p-4 text-xl border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none pr-12"
                                        aria-describedby="brutto-help"
                                        min="0"
                                        max="20000"
                                    />
                                    <span className="absolute right-4 top-1/2 transform -translate-y-1/2 text-xl font-semibold text-gray-600" aria-hidden="true">€</span>
                                </div>
                            </div>
                            <p id="brutto-help" className="text-sm text-gray-600 mt-2">💡 Ihr durchschnittliches Gehalt vor Steuern und Abzügen.</p>
                        </fieldset>
                    </div>
                    
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
                        <div className="bg-white border-2 border-gray-200 rounded-lg p-6">
                            <label htmlFor="steuerklasse-select" className="block text-lg font-semibold text-gray-700 mb-3">Steuerklasse</label>
                            <select 
                                id="steuerklasse-select"
                                value={formData.steuerklasse} 
                                onChange={(e) => handleInputChange('steuerklasse', e.target.value)} 
                                className="w-full p-3 text-lg border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none"
                                aria-describedby="steuerklasse-help"
                            >
                                <option value="I">Klasse I (ledig)</option>
                                <option value="II">Klasse II (alleinerziehend)</option>
                                <option value="III">Klasse III (verheiratet)</option>
                                <option value="IV">Klasse IV (verheiratet)</option>
                                <option value="V">Klasse V (verheiratet)</option>
                            </select>
                            <div id="steuerklasse-help" className="sr-only">Wählen Sie Ihre aktuelle Steuerklasse aus</div>
                        </div>
                        
                        <div className="bg-white border-2 border-gray-200 rounded-lg p-6">
                            <label htmlFor="bundesland-select" className="block text-lg font-semibold text-gray-700 mb-3">Bundesland</label>
                            <select 
                                id="bundesland-select"
                                value={formData.bundesland} 
                                onChange={(e) => handleInputChange('bundesland', e.target.value)} 
                                className="w-full p-3 text-lg border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none"
                                aria-describedby="bundesland-help"
                            >
                                <option value="Baden-Württemberg">Baden-Württemberg</option>
                                <option value="Bayern">Bayern</option>
                                <option value="Berlin">Berlin</option>
                                <option value="Brandenburg">Brandenburg</option>
                                <option value="Bremen">Bremen</option>
                                <option value="Hamburg">Hamburg</option>
                                <option value="Hessen">Hessen</option>
                                <option value="Mecklenburg-Vorpommern">Mecklenburg-Vorpommern</option>
                                <option value="Niedersachsen">Niedersachsen</option>
                                <option value="Nordrhein-Westfalen">Nordrhein-Westfalen</option>
                                <option value="Rheinland-Pfalz">Rheinland-Pfalz</option>
                                <option value="Saarland">Saarland</option>
                                <option value="Sachsen">Sachsen</option>
                                <option value="Sachsen-Anhalt">Sachsen-Anhalt</option>
                                <option value="Schleswig-Holstein">Schleswig-Holstein</option>
                                <option value="Thüringen">Thüringen</option>
                            </select>
                            <div id="bundesland-help" className="sr-only">Wählen Sie Ihr Bundesland für die korrekte Kirchensteuer-Berechnung</div>
                        </div>
                    </div>
                    
                    <button 
                        onClick={() => setStep(2)} 
                        disabled={!formData.brutto} 
                        className="w-full bg-blue-500 text-white py-4 px-6 rounded-lg text-xl font-semibold hover:bg-blue-600 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors mt-6"
                        type="button"
                        aria-describedby="step1-button-help"
                    >
                        Weiter zur Familienplanung →
                    </button>
                    <div id="step1-button-help" className="sr-only">
                        {!formData.brutto ? 'Bitte geben Sie zuerst Ihr Bruttoeinkommen ein' : 'Weiter zum nächsten Schritt'}
                    </div>
                </section>
            );

            // STEP 2
            const Step2 = () => ( 
                <section aria-labelledby="step2-heading">
                    <h2 id="step2-heading" className="text-3xl font-bold text-center text-gray-800 mb-8">👶 Familiendaten</h2>
                    
                    <div className="bg-pink-50 border-l-4 border-pink-500 p-6 rounded-lg">
                        <fieldset>
                            <legend className="text-xl font-semibold text-pink-800 mb-4">Wann wird Ihr Baby geboren?</legend>
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                                <div>
                                    <label htmlFor="geburtsmonat-select" className="block text-sm font-semibold text-gray-700 mb-2">Monat</label>
                                    <select 
                                        id="geburtsmonat-select"
                                        value={formData.geburtsmonat || ''} 
                                        onChange={(e) => handleInputChange('geburtsmonat', e.target.value)} 
                                        className="w-full p-3 text-lg border-2 border-gray-300 rounded-lg focus:border-pink-500 focus:outline-none"
                                        aria-describedby="geburtsmonat-help"
                                        required
                                    >
                                        <option value="">Monat wählen...</option>
                                        {[...Array(12).keys()].map(i => 
                                            <option key={i+1} value={(i+1).toString().padStart(2, '0')}>
                                                {new Date(0, i).toLocaleString('de', { month: 'long' })}
                                            </option>
                                        )}
                                    </select>
                                    <div id="geburtsmonat-help" className="sr-only">Voraussichtlicher Geburtsmonat Ihres Kindes</div>
                                </div>
                                
                                <div>
                                    <label htmlFor="geburtsjahr-select" className="block text-sm font-semibold text-gray-700 mb-2">Jahr</label>
                                    <select 
                                        id="geburtsjahr-select"
                                        value={formData.geburtsjahr || ''} 
                                        onChange={(e) => handleInputChange('geburtsjahr', e.target.value)} 
                                        className="w-full p-3 text-lg border-2 border-gray-300 rounded-lg focus:border-pink-500 focus:outline-none"
                                        aria-describedby="geburtsjahr-help"
                                        required
                                    >
                                        <option value="">Jahr wählen...</option>
                                        <option value="2024">2024</option>
                                        <option value="2025">2025</option>
                                    </select>
                                    <div id="geburtsjahr-help" className="sr-only">Voraussichtliches Geburtsjahr Ihres Kindes</div>
                                </div>
                            </div>
                        </fieldset>
                    </div>
                    
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
                        <div className="bg-white border-2 border-gray-200 rounded-lg p-6">
                            <label htmlFor="mehrlinge-select" className="block text-lg font-semibold text-gray-700 mb-3">Mehrlingsgeburt?</label>
                            <select 
                                id="mehrlinge-select"
                                value={formData.mehrlinge} 
                                onChange={(e) => handleInputChange('mehrlinge', e.target.value)} 
                                className="w-full p-3 text-lg border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none"
                                aria-describedby="mehrlinge-help"
                            >
                                <option value="nein">Nein</option>
                                <option value="zwillinge">Ja, Zwillinge (+300€)</option>
                                <option value="drillinge">Ja, Drillinge (+600€)</option>
                            </select>
                            <div id="mehrlinge-help" className="sr-only">Mehrlingszuschlag für Zwillinge oder Drillinge</div>
                        </div>
                        
                        <fieldset className="bg-white border-2 border-gray-200 rounded-lg p-6">
                            <legend className="block text-lg font-semibold text-gray-700 mb-3">Kirchensteuerpflichtig?</legend>
                            <div className="flex gap-4 mt-2" role="radiogroup" aria-describedby="kirchensteuer-help">
                                <label className={`flex-1 p-3 border-2 rounded-lg text-center cursor-pointer ${
                                    formData.kirchensteuer === 'ja' ? 'bg-blue-500 text-white border-blue-500' : 'bg-white'
                                }`}>
                                    <input 
                                        type="radio" 
                                        name="kirchensteuer" 
                                        value="ja" 
                                        checked={formData.kirchensteuer === 'ja'} 
                                        onChange={(e) => handleInputChange('kirchensteuer', e.target.value)} 
                                        className="sr-only"
                                        aria-describedby="kirchensteuer-help"
                                    />
                                    Ja
                                </label>
                                <label className={`flex-1 p-3 border-2 rounded-lg text-center cursor-pointer ${
                                    formData.kirchensteuer === 'nein' ? 'bg-blue-500 text-white border-blue-500' : 'bg-white'
                                }`}>
                                    <input 
                                        type="radio" 
                                        name="kirchensteuer" 
                                        value="nein" 
                                        checked={formData.kirchensteuer === 'nein'} 
                                        onChange={(e) => handleInputChange('kirchensteuer', e.target.value)} 
                                        className="sr-only"
                                        aria-describedby="kirchensteuer-help"
                                    />
                                    Nein
                                </label>
                            </div>
                            <div id="kirchensteuer-help" className="sr-only">Kirchensteuerpflicht beeinflusst die Netto-Berechnung</div>
                        </fieldset>
                    </div>
                    
                    <fieldset className="bg-green-50 border-l-4 border-green-500 p-6 rounded-lg mt-6">
                        <legend className="block text-lg font-semibold text-green-800 mb-3">Anspruch auf Geschwisterbonus?</legend>
                        <div className="flex gap-4" role="radiogroup" aria-describedby="geschwisterbonus-help">
                            <label className={`flex-1 p-3 border-2 rounded-lg text-center cursor-pointer ${
                                formData.geschwisterbonusBedingung === 'ja' ? 'bg-green-500 text-white border-green-500' : 'bg-white'
                            }`}>
                                <input 
                                    type="radio" 
                                    name="geschwisterbonus" 
                                    value="ja" 
                                    checked={formData.geschwisterbonusBedingung === 'ja'} 
                                    onChange={(e) => handleInputChange('geschwisterbonusBedingung', e.target.value)} 
                                    className="sr-only"
                                    aria-describedby="geschwisterbonus-help"
                                />
                                Ja
                            </label>
                            <label className={`flex-1 p-3 border-2 rounded-lg text-center cursor-pointer ${
                                formData.geschwisterbonusBedingung === 'nein' ? 'bg-green-500 text-white border-green-500' : 'bg-white'
                            }`}>
                                <input 
                                    type="radio" 
                                    name="geschwisterbonus" 
                                    value="nein" 
                                    checked={formData.geschwisterbonusBedingung === 'nein'} 
                                    onChange={(e) => handleInputChange('geschwisterbonusBedingung', e.target.value)} 
                                    className="sr-only"
                                    aria-describedby="geschwisterbonus-help"
                                />
                                Nein
                            </label>
                        </div>
                        <p id="geschwisterbonus-help" className="text-sm text-gray-600 mt-2">💡 Ja, wenn Sie ein weiteres Kind unter 3 Jahren oder zwei weitere Kinder unter 6 Jahren haben.</p>
                    </fieldset>
                    
                    <div className="flex space-x-4 mt-6">
                        <button 
                            onClick={() => setStep(1)} 
                            className="flex-1 bg-gray-500 text-white py-4 px-6 rounded-lg text-xl font-semibold hover:bg-gray-600 transition-colors"
                            type="button"
                            aria-label="Zurück zu Schritt 1: Einkommensdaten"
                        >
                            ← Zurück
                        </button>
                        <button 
                            onClick={calculateElterngeld} 
                            disabled={!formData.geburtsmonat || !formData.geburtsjahr} 
                            className="flex-1 bg-green-500 text-white py-4 px-6 rounded-lg text-xl font-semibold hover:bg-green-600 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors"
                            type="button"
                            aria-describedby="step2-button-help"
                        >
                            Elterngeld berechnen! 🎉
                        </button>
                    </div>
                    <div id="step2-button-help" className="sr-only">
                        {(!formData.geburtsmonat || !formData.geburtsjahr) ? 
                            'Bitte wählen Sie Geburtsmonat und -jahr aus' : 
                            'Elterngeld-Berechnung starten'
                        }
                    </div>
                </section>
            );

            // STEP 3
            const Step3 = () => ( 
                <section aria-labelledby="step3-heading">
                    <div className="fixed top-0 left-[-9999px] opacity-0" aria-hidden="true">
                        <div ref={pdfRef}>
                            <PDFLayout result={result} formData={formData} />
                        </div>
                    </div>
                    
                    <h2 id="step3-heading" className="text-3xl font-bold text-center text-gray-800 mb-8">🎉 Ihr Elterngeld-Ergebnis</h2>
                    
                    {result?.elterngeld === 0 ? ( 
                        <div className="bg-red-50 border-l-4 border-red-500 p-6 rounded-lg" role="alert" aria-labelledby="no-elterngeld-heading">
                            <h3 id="no-elterngeld-heading" className="text-2xl font-bold text-red-800 mb-4">❌ Kein Elterngeld möglich</h3>
                            <p className="text-lg text-red-700 mb-4">Grund: {result.grund}</p>
                            <div className="bg-white p-4 rounded-lg">
                                <p className="text-lg">📊 Ihr Jahreseinkommen: <strong>{result.jahreseinkommen?.toLocaleString('de-DE')}€</strong></p>
                                <p className="text-lg">📈 Einkommensgrenze: <strong>{result.grenze?.toLocaleString('de-DE')}€</strong></p>
                            </div>
                        </div> 
                    ) : ( 
                        <div className="bg-green-50 border-l-4 border-green-500 p-6 rounded-lg" role="region" aria-labelledby="elterngeld-result-heading">
                            <h3 id="elterngeld-result-heading" className="text-2xl font-bold text-green-800 mb-6">✅ Ihr voraussichtliches Basiselterngeld</h3>
                            
                            <div className="text-center mb-6">
                                <p className="text-5xl font-bold text-green-800" aria-label={`${result?.elterngeld?.toLocaleString('de-DE')} Euro pro Monat`}>
                                    {result?.elterngeld?.toLocaleString('de-DE')}€
                                </p>
                                <p className="text-xl text-gray-600">pro Monat</p>
                            </div>
                            
                            <div className="bg-white p-6 rounded-lg">
                                <h4 className="text-xl font-semibold text-gray-800 mb-4">📋 Berechnungsdetails (Schätzung)</h4>
                                <dl className="space-y-2 text-lg">
                                    <div><dt className="inline">Ihr Bruttoeinkommen:</dt> <dd className="inline font-bold">{parseFloat(formData.brutto).toLocaleString('de-DE')}€</dd></div>
                                    <div><dt className="inline">➜ Geschätztes Netto:</dt> <dd className="inline font-bold">{result?.details?.netto?.toLocaleString('de-DE', { maximumFractionDigits: 0 })}€</dd></div>
                                    <div><dt className="inline">➜ Angewandte Ersatzrate:</dt> <dd className="inline font-bold">{(result?.details?.ersatzrate * 100).toFixed(1)}%</dd></div>
                                    <hr className="my-2" aria-hidden="true"/>
                                    <div><dt className="inline">Grundbetrag:</dt> <dd className="inline font-bold">{result?.details?.basisElterngeld?.toLocaleString('de-DE', { maximumFractionDigits: 0 })}€</dd></div>
                                    {result?.details?.geschwisterbonus > 0 && 
                                        <div className="text-green-600"><dt className="inline">+ Geschwisterbonus:</dt> <dd className="inline font-bold">{result.details.geschwisterbonus.toLocaleString('de-DE', { maximumFractionDigits: 0 })}€</dd></div>
                                    }
                                    {result?.details?.mehrlingszuschlag > 0 && 
                                        <div className="text-green-600"><dt className="inline">+ Mehrlingszuschlag:</dt> <dd className="inline font-bold">{result.details.mehrlingszuschlag.toLocaleString('de-DE', { maximumFractionDigits: 0 })}€</dd></div>
                                    }
                                    <hr className="my-2" aria-hidden="true"/>
                                    <div><dt className="inline">Gesamtsumme (12 Monate):</dt> <dd className="inline font-bold text-blue-700">{result?.gesamtsumme?.toLocaleString('de-DE')}€</dd></div>
                                </dl>
                            </div>
                        </div> 
                    )}
                    
                    <div className="bg-yellow-100 border-l-4 border-yellow-500 p-4 rounded-lg text-center mt-6" role="note">
                        <p className="font-bold text-yellow-800">Wichtiger Hinweis zur Berechnung</p>
                        <p className="text-sm text-yellow-700">Alle Berechnungen sind unverbindliche Schätzungen und stellen keine Rechts- oder Steuerberatung dar. Für eine verbindliche Auskunft wenden Sie sich bitte ausschließlich an Ihre zuständige Elterngeldstelle.</p>
                    </div>
                    
                    <div className="bg-gray-50 p-6 rounded-lg mt-6">
                        <h4 className="text-xl font-semibold text-gray-800 mb-4 text-center">📄 Ergebnis als PDF speichern</h4>
                        <div className="max-w-md mx-auto">
                            <button 
                                onClick={handleDownloadPDF} 
                                className="w-full flex items-center justify-center bg-red-500 text-white py-3 px-6 rounded-lg hover:bg-red-600 transition-colors text-lg font-semibold"
                                type="button"
                                aria-label="Elterngeld-Ergebnis als PDF-Datei herunterladen"
                            >
                                <Download className="mr-2" />
                                PDF herunterladen
                            </button>
                        </div>
                    </div>
                    
                    <div className="bg-gradient-to-r from-blue-50 to-purple-50 border-l-4 border-blue-500 p-6 rounded-lg mt-6" role="complementary" aria-labelledby="affiliate-heading">
                        <h4 id="affiliate-heading" className="text-xl font-semibold text-blue-800 mb-1">🔥 Empfohlene Services (Werbung)</h4>
                        <p className="text-xs text-gray-500 mb-4">Mit einem Sternchen (*) markierte Links sind Affiliate-Links. Bei einem Abschluss über diese Links erhalten wir eine Provision. Für Sie entstehen keine zusätzlichen Kosten.</p>
                        
                        <nav aria-label="Affiliate-Partner Links">
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <a href="https://www.check24.de/private-krankenversicherung/?utm_source=elterngeld&utm_medium=affiliate" target="_blank" rel="noopener noreferrer" className="flex items-center justify-between bg-white p-4 rounded-lg border hover:shadow-md transition-shadow" aria-label="CHECK24 Familienversicherung vergleichen (öffnet in neuem Tab)">
                                    <div>
                                        <h5 className="font-semibold text-gray-800">🏥 Familienversicherung*</h5>
                                        <p className="text-sm text-gray-600">CHECK24 - Beste Tarife vergleichen</p>
                                    </div>
                                    <div className="text-blue-500"><ExternalLink /></div>
                                </a>
                                <a href="https://www.steuerberater.de/finden?utm_source=elterngeld&utm_medium=affiliate" target="_blank" rel="noopener noreferrer" className="flex items-center justify-between bg-white p-4 rounded-lg border hover:shadow-md transition-shadow" aria-label="Steuerberatung für Elterngeld-Optimierung finden (öffnet in neuem Tab)">
                                    <div>
                                        <h5 className="font-semibold text-gray-800">👨‍⚖️ Steuerberatung*</h5>
                                        <p className="text-sm text-gray-600">Elterngeld optimieren</p>
                                    </div>
                                    <div className="text-blue-500"><ExternalLink /></div>
                                </a>
                                <a href="https://www.amazon.de/baby-erstausstattung/s?k=baby+erstausstattung&tag=elterngeld-21" target="_blank" rel="noopener noreferrer" className="flex items-center justify-between bg-white p-4 rounded-lg border hover:shadow-md transition-shadow" aria-label="Baby-Erstausstattung bei Amazon kaufen (öffnet in neuem Tab)">
                                    <div>
                                        <h5 className="font-semibold text-gray-800">🍼 Baby-Erstausstattung*</h5>
                                        <p className="text-sm text-gray-600">Amazon - Alles für den Start</p>
                                    </div>
                                    <div className="text-blue-500"><ExternalLink /></div>
                                </a>
                                <a href="https://www.babyone.de/?utm_source=elterngeld&utm_medium=affiliate" target="_blank" rel="noopener noreferrer" className="flex items-center justify-between bg-white p-4 rounded-lg border hover:shadow-md transition-shadow" aria-label="BabyOne Fachhandel besuchen (öffnet in neuem Tab)">
                                    <div>
                                        <h5 className="font-semibold text-gray-800">🛍️ BabyOne*</h5>
                                        <p className="text-sm text-gray-600">Fachhandel für Baby-Bedarf</p>
                                    </div>
                                    <div className="text-blue-500"><ExternalLink /></div>
                                </a>
                            </div>
                        </nav>
                    </div>
                    
                    <button 
                        onClick={resetForm} 
                        className="w-full bg-gray-500 text-white py-4 px-6 rounded-lg text-xl font-semibold hover:bg-gray-600 transition-colors mt-6"
                        type="button"
                        aria-label="Neue Elterngeld-Berechnung starten"
                    >
                        🔄 Neue Berechnung starten
                    </button>
                </section>
            );

            return (
                <div className="min-h-screen bg-gray-100 py-8 px-4">
                    <div className="max-w-4xl mx-auto">
                        <header className="text-center mb-8" role="banner">
                            <h1 className="text-4xl font-bold text-gray-800 mb-4">🍼 Elterngeld-Rechner 2024/2025</h1>
                            <p className="text-xl text-gray-600">Berechnen Sie Ihr Elterngeld nach den neuesten Gesetzen</p>
                            <div className="mt-4 bg-red-50 border border-red-200 rounded-lg p-4" role="alert">
                                <p className="text-red-800 font-semibold">⚠️ Neue Einkommensgrenzen ab April 2024: 200.000€ | Ab April 2025: 175.000€</p>
                            </div>
                        </header>
                        
                        <StepIndicator />
                        
                        <main id="main-content" className="bg-white rounded-lg shadow-lg p-8" role="main">
                            {step === 1 && <Step1 />}
                            {step === 2 && <Step2 />}
                            {step === 3 && <Step3 />}
                        </main>
                        
                        <aside className="mt-8 bg-white rounded-lg shadow-lg p-6" role="complementary" aria-labelledby="resources-heading">
                            <h3 id="resources-heading" className="text-2xl font-bold text-center text-gray-800 mb-6">📚 Weitere hilfreiche Ressourcen</h3>
                            <nav aria-label="Zusätzliche Services">
                                <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                                    <a href="https://www.finanzcheck.de/kredit/?utm_source=elterngeld&utm_medium=affiliate" target="_blank" rel="noopener noreferrer" className="bg-gradient-to-r from-green-50 to-blue-50 p-4 rounded-lg border hover:shadow-md transition-shadow" aria-label="Familienkredit bei Finanzcheck vergleichen (öffnet in neuem Tab)">
                                        <h4 className="font-semibold text-gray-800 mb-2">💰 Familienkredit*</h4>
                                        <p className="text-sm text-gray-600 mb-2">Günstige Kredite für Familie vergleichen</p>
                                        <div className="flex items-center text-blue-500 text-sm">
                                            <span className="mr-1">Jetzt vergleichen</span>
                                            <ExternalLink />
                                        </div>
                                    </a>
                                    <a href="https://www.netmoms.de/?utm_source=elterngeld&utm_medium=affiliate" target="_blank" rel="noopener noreferrer" className="bg-gradient-to-r from-pink-50 to-purple-50 p-4 rounded-lg border hover:shadow-md transition-shadow" aria-label="NetMoms Mama-Community besuchen (öffnet in neuem Tab)">
                                        <h4 className="font-semibold text-gray-800 mb-2">👩‍👧‍👦 Mama-Community*</h4>
                                        <p className="text-sm text-gray-600 mb-2">NetMoms - Deutschlands größte Mama-Community</p>
                                        <div className="flex items-center text-blue-500 text-sm">
                                            <span className="mr-1">Zur Community</span>
                                            <ExternalLink />
                                        </div>
                                    </a>
                                    <a href="https://www.elterngeld.de/elterngeld-antrag/?utm_source=rechner&utm_medium=affiliate" target="_blank" rel="noopener noreferrer" className="bg-gradient-to-r from-yellow-50 to-orange-50 p-4 rounded-lg border hover:shadow-md transition-shadow" aria-label="Elterngeld-Antrag professionell stellen lassen (öffnet in neuem Tab)">
                                        <h4 className="font-semibold text-gray-800 mb-2">📋 Elterngeld-Antrag*</h4>
                                        <p className="text-sm text-gray-600 mb-2">Professionelle Hilfe beim Antrag</p>
                                        <div className="flex items-center text-blue-500 text-sm">
                                            <span className="mr-1">Antrag stellen</span>
                                            <ExternalLink />
                                        </div>
                                    </a>
                                </div>
                            </nav>
                        </aside>

                        <LegalFooter />
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(ElterngeldRechner));
    </script>
</body>
</html>
